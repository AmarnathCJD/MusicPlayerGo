<html>
  <head>
    <meta charset="utf-8" />
    <title>Music Player</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="https://img.icons8.com/fluency/96/000000/music-heart.png"
    />
    <link
      rel="stylesheet"
      hrefhref="https://open.scdn.co/cdn/build/mwp/mwp.8fda9db4.css"
    />
    <style>
      body {
        font-family: sans-serifï¼ŒVerdana, Arial, Helvetica;
        font-size: 10pt;
      }

      #playlist {
        border-radius: 10px;
        padding: 5px 5px 3px 5px;
        width: 290px;
        margin-left: 1px;
        margin-top: 10px;
        height: 500px;
        overflow: auto;
      }

      #btn {
        border-radius: 10px;
        width: 296px;
        margin-left: 1px;
        margin-top: 5px;
        height: 50px;
        overflow: auto;
        background: #694ee4;
        font-weight: bold;
        color: rgb(238, 238, 238);
      }

      #playlist a {
        display: block;
        cursor: pointer;
        padding: 2px 4px;
        border-radius: 5px;
        overflow: hidden;
        margin-bottom: 2px;
      }

      #playlist a.file {
        background: #b4247d;
      }

      #playlist {
        background: #3cb371;
      }

      #playlist a {
        background: #7ccd7c;
      }

      #playlist a.playing {
        background: #9acd32;
        font-weight: bold;
        color: red;
      }

      #playlist a:hover {
        background: #eec900;
      }

      input[type="text"],
      select {
        width: 296px;
        padding: 12px 20px;
        margin: 8px 0;
        display: inline-block;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
      }

      input[type="submit"]:hover {
        background-color: #3dbe43;
      }

      input[type="submit"] {
        width: 296px;
        background-color: #613eb3;
        color: white;
        padding: 14px 20px;
        margin: 8px 0;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      .center {
        margin: auto;
        width: 50%;
        border: 3px solid green;
        padding: 10px;
      }
body {
  margin: 0;
  font: normal 75% Arial, Helvetica, sans-serif;
}
canvas {
  display: block;
  vertical-align: bottom;
} /* ---- particles.js container ---- */
#particles-js {
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: #000000;
  background-image: url("https://telegra.ph//file/d3160d0c075a90a0c8738.jpg");
  background-repeat: no-repeat;
  background-size: 30%;
  background-position: 50% 50%;
} /* ---- stats.js ---- */
.count-particles {
  background: #000022;
  position: absolute;
  top: 48px;
  left: 0;
  width: 80px;
  color: #13e8e9;
  font-size: 0.8em;
  text-align: left;
  text-indent: 4px;
  line-height: 14px;
  padding-bottom: 2px;
  font-family: Helvetica, Arial, sans-serif;
  font-weight: bold;
}
.js-count-particles {
  font-size: 1.1em;
}
#stats,
.count-particles {
  -webkit-user-select: none;
  margin-top: 5px;
  margin-left: 5px;
}
#stats {
  border-radius: 3px 3px 0 0;
  overflow: hidden;
}
.count-particles {
  border-radius: 0 0 3px 3px;
}
    </style>
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript">
      particlesJS("particles-js", {
  particles: {
    number: { value: 160, density: { enable: true, value_area: 800 } },
    color: { value: "#f21515" },
    shape: {
      type: "star",
      stroke: { width: 0, color: "#000000" },
      polygon: { nb_sides: 5 },
      image: { src: "img/github.svg", width: 100, height: 100 }
    },
    opacity: {
      value: 1,
      random: true,
      anim: { enable: true, speed: 1, opacity_min: 0, sync: false }
    },
    size: {
      value: 3,
      random: true,
      anim: { enable: false, speed: 4, size_min: 0.3, sync: false }
    },
    line_linked: {
      enable: false,
      distance: 150,
      color: "#ffffff",
      opacity: 0.4,
      width: 1
    },
    move: {
      enable: true,
      speed: 1,
      direction: "none",
      random: true,
      straight: false,
      out_mode: "out",
      bounce: false,
      attract: { enable: true, rotateX: 600, rotateY: 600 }
    }
  },
  interactivity: {
    detect_on: "canvas",
    events: {
      onhover: { enable: true, mode: "grab" },
      onclick: { enable: true, mode: "push" },
      resize: true
    },
    modes: {
      grab: { distance: 231.44200550588337, line_linked: { opacity: 1 } },
      bubble: { distance: 250, size: 0, duration: 2, opacity: 0, speed: 3 },
      repulse: { distance: 400, duration: 0.4 },
      push: { particles_nb: 4 },
      remove: { particles_nb: 2 }
    }
  },
  retina_detect: true
});
var count_particles, stats, update;
stats = new Stats();
stats.setMode(0);
stats.domElement.style.position = "absolute";
stats.domElement.style.left = "0px";
stats.domElement.style.top = "0px";
document.body.appendChild(stats.domElement);
count_particles = document.querySelector(".js-count-particles");
update = function () {
  stats.begin();
  stats.end();
  if (window.pJSDom[0].pJS.particles && window.pJSDom[0].pJS.particles.array) {
    count_particles.innerText = window.pJSDom[0].pJS.particles.array.length;
  }
  requestAnimationFrame(update);
};
requestAnimationFrame(update);
      var root = "/music/";
      var path = [];

      function init() {
        load(path);
        $("#player").bind("ended", next);
        $("#btn").click(next);
      }

      function load(path) {
        var url = root + path.join("/");
        $.ajax({
          url: url,
          dataType: "json",
          success: function (data) {
            listFile(data);
          },
        });
      }

      function listFile(files) {
        var $b = $("#playlist").empty();

        function addToList(i, f) {
          if (f.Name[0] == "." || f.Name[0] == ":") return;
          var dir = f.IsDir;
          if (dir) return;
          f.Path = path.join("/");
          $("<a></a>")
            .text(f.Name)
            .data("file", f)
            .addClass("file")
            .appendTo($b)
            .click(clickFile);
        }
        $.each(files, addToList);
      }

      function clickFile(e) {
        var f = $(e.target).data("file");
        var name = f.Name;
        var path = f.Path;
        var url = root + path + "/" + name;
        $("#playlist a").removeClass("playing");
        $(e.target).addClass("playing");
        $("#player").attr("src", url);
        $("#player").play();
      }

      function next() {
        var $next = $("#playlist a.playing").next();
        if ($next.length) $next.click();
      }

      function httpGet(theUrl) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", theUrl, false);
        xmlHttp.send(null);
        return xmlHttp.response;
      }

      function sleep(ms) {
        return new Promise((resolve) => setTimeout(resolve, ms));
      }

      function search(e) {
        var $form = $(e.target);
        var $input = $form.find("input[id=search]");
        var search = $input.val();
        $.ajax({
          url: root + "search",
          data: {
            search: search,
          },
          dataType: "json",
          success: function (data) {
            fetch(root + "search", {
              method: "GET",
              body: JSON.stringify(data),
              headers: {
                "Content-Type": "application/json",
              },
            });
            init();
            console.log("Hello!");
          },
        });
      }
      google.load("jquery", "1.3.1");
      google.setOnLoadCallback(init);
    </script>
  </head>

  <body>
    <audio id="player" controls autoplay autobuffer>
      <p>What? Your browser doesn't support</p>
    </audio>
    <div id="playlist" class="center"></div>
    <input type="text" id="search" placeholder="Search Songs" />
    <input type="submit" value="Search" onclick="search(this)" />
    <button id="btn" title="skip this song!">Skip</button>
    <div id="particles-js"></div> <!-- stats - count particles -->
<div class="count-particles"> <span class="js-count-particles">--</span> particles </div> <!-- particles.js lib - https://github.com/VincentGarreau/particles.js -->
<script src="http://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script> <!-- stats.js lib -->
<script src="http://threejs.org/examples/js/libs/stats.min.js"></script>
  </body>
</html>
